# ============================================================================
# Kubernetes 多集群配置示例文件
# ============================================================================
# 使用方法：
# 1. 复制此文件到 ~/.kube/config
# 2. 替换 <placeholder> 为实际值
# 3. 使用 kubectl config use-context <context-name> 切换集群
# ============================================================================

apiVersion: v1
kind: Config
preferences: {}
clusters:
  # ============================================================================
  # 生产集群配置
  # ============================================================================
  - name: prod.kubernetes.cluster
    cluster:
      server: https://prod-k8s-api.example.com:6443
      certificate-authority-data: <base64-encoded-ca-cert>

  # ============================================================================
  # 开发集群配置
  # ============================================================================
  - name: dev.kubernetes.cluster
    cluster:
      server: https://dev-k8s-api.example.com:6443
      certificate-authority-data: <base64-encoded-ca-cert>

# ============================================================================
# 用户认证配置
# ============================================================================
users:
  # 生产集群管理员
  - name: prod-admin
    user:
      client-certificate-data: <base64-encoded-client-cert>
      client-key-data: <base64-encoded-client-key>

  # 开发集群管理员
  - name: dev-admin
    user:
      client-certificate-data: <base64-encoded-client-cert>
      client-key-data: <base64-encoded-client-key>

# ============================================================================
# 上下文配置
# ============================================================================
contexts:
  # 生产环境上下文
  - name: prod.kubernetes.cluster
    context:
      cluster: prod.kubernetes.cluster
      user: prod-admin
      namespace: default

  # 开发环境上下文
  - name: dev.kubernetes.cluster
    context:
      cluster: dev.kubernetes.cluster
      user: dev-admin
      namespace: default

# ============================================================================
# 当前上下文
# ============================================================================
current-context: dev.kubernetes.cluster

# ============================================================================
# 配置说明
# ============================================================================
#
# 1. 生成 base64 编码的证书：
#    base64 -w 0 <filename>
#
# 2. 查看当前配置：
#    kubectl config view
#
# 3. 查看所有上下文：
#    kubectl config get-contexts
#
# 4. 切换上下文：
#    kubectl config use-context prod.kubernetes.cluster
#    kubectl config use-context dev.kubernetes.cluster
#
# 5. 测试连接：
#    kubectl --context=prod.kubernetes.cluster get nodes
#    kubectl --context=dev.kubernetes.cluster get nodes
#
# ============================================================================
